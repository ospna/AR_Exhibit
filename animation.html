<!doctype html>
<html lang="en-us">

<head>
    <!-- A-Frame libraries -->
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.4/dist/aframe-extras.min.js"></script>

  <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>

    <!-- AR.js Library -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <!-- P5 libraries -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.1.9/lib/p5.js"></script>

    <!-- Craig's AFrameP5 AR library -->
    <script src="https://craignyu.github.io/aframep5-ar/libraries/aframep5_ar.js"></script>

    <!-- P5 Sketch -->
    <!-- <script src="part.js"></script> -->
    <script src="sketchContainer.js"></script>

    <!-- Button Interactions -->
    <script src="functions.js"></script>

    <!-- CSS Stylesheet -->
    <link rel='stylesheet' type='text/css' href="style.css">

    <!-- FunkyDori Text Font-->
    <link rel="stylesheet" href="https://use.typekit.net/oih4pvt.css">

    <!-- Custom Styles -->
    <style type="text/css">
        body {
            margin: 0px;
            overflow: hidden;
        }
    </style>

    <script>
        AFRAME.registerComponent('vidhandler', {
        // ...
        init: function () {
            // Set up initial state and variables.
            this.toggle = false;
            this.vid = document.querySelector("#vid")
            this.vid.pause();
        },
        tick:function(){
            
        if(this.el.object3D.visible == true){
        if(!this.toggle){
            this.toggle = true;
            this.vid.play();
            }
        }else{
        this.toggle = false;
            this.vid.pause();
            }
        }
        });
      </script>
</head>

<body style='margin : 0px; overflow: hidden;'>
    <div style='position: fixed; top: 10px; width:inherit; text-align: center; z-index: 1;'>
      <a href="https://github.com/jeromeetienne/AR.js/" target="_blank">AR.js</a> - Check out the repository !
    </div>
    <!-- modal box to tell the user to rotate their device into landscape mode - the AR toolkit only reliably renders in landscape mode -->
    <!-- <div id="portrait_warning">
        <h1>Rotate your device into landscape mode!</h1>
    </div> -->

    <!-- Define A-Frame VR Scene and set it up so that it will be manipulated through AR.js -->
    <a-scene id="ARScene" embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono;'>

        <!-- Essentially not needed anymore -->
        <!-- set up graphics we want to use as assets, same as in A-Frame VR-->
        
        <a-assets>
            <img src="images/honeysuckle.jpg" id="honeysuckle">

            <!--
            <video src="animations/IntroWhite.mp4" id="animation" autoplay loop="true"></video> 
            -->

            <video id="animation" src="animations/IntroWhite.mp4" loop="true">

            <!-- Fused Leaf Fusion -->
            <img src="images/AR Media/fused_leaves-01.svg" id="fused_leaves-01">

            <video id="vid" src="https://cdn.glitch.com/b62367d1-ceab-454b-b664-b032f995ed86%2FBig_Buck_Bunny_Trailer_1080p.ogv.720p.webm?1532370072191" loop="true" crossorigin></video>

            <!---------------------------- NEED TO FIX THIS ----------------
            <a-asset-item id="chrysantha" src="/3D_models/models/Colored.Lonicera.Chrysantha.glb"></a-asset-item>

            <a-asset-item id="chrysantha-obj" src="/3D_models/3D_obj_models/colored_chrysantha/Colored.Lonicera.Chrysantha.obj"></a-asset-item>
            <a-asset-item id="chrysantha-mtl" src="/3D_models/3D_obj_models/colored_chrysantha/Colored.Lonicera.Chrysantha.mtl"></a-asset-item>

            <-- <img src="images/honeysuckle.jpg" id="honeysuckle"> -->
        </a-assets>

        <!-- set up all of the AR markers we will be working with along with links to their 'pattern' files -->
        <!-- note that we aren't putting any geometry inside of marker here - we will do that in the p5 sketch -->
        
        <a-marker id="hiro" type="pattern" url="markers/patt.hiro"></a-marker>

        <a-marker id="patt6" type="pattern" url="markers/pattern-HS2.patt" vidhandler>
            <a-plane position='0 0 1' scale="1 1 1" width="1" rotation="-90 0 0" material='transparent:true; opacity: 0.7; src:#vid'></a-plane>
        </a-marker>
    
        <header>
            <div class="logo">
               <img>
            </div>
        </header>
    </a-scene>
</body>
</html>